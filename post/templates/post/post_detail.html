{% extends 'base.html' %}
{% block title %}
    @{{ post.user }}
{% endblock title %}
{% block content %}
        {% if request.user.is_authenticated and request.user.id == post.user.id%}
            <a href="{% url "post:delete_post" post.user.id post.id %}">Delete</a>
        <br>
            <a href="{% url "post:edit_post" post.user.id post.id %}">Edit</a>

    {% endif %}

    <p>{{  post.user}}</p>

    <small>{{ post.created }} </small>
            <hr>

    <p>
        {{ post.body }}
    </p>

    <hr>
        {% with tottal=comments.count %}
    <p>This post has {{ tottal }} comments</p>
    {% endwith %}
    {% if request.user.is_authenticated %}
        <form method="post" action="" novalidate class="mt-5 mb-5 col-md-6" >
            {% csrf_token %}
            {{ form.as_p }}
        <input type="submit" value="Send" class="btn btn-primary">
        </form>

    {% else %}
    <p>Only logged in users can send comment</p>
    {% endif %}
    {% for comment in comments%}
        <div class="card text-white bg-dark" >
        <p class="card-header">{{ comment.user }}</p>
        <p class="card-body">{{ comment.body }}</p>
        <small class="card-footer ml-auto">{{ comment.created }}</small>
        </div>
        <br>
        {% empty %}
        <p>There is no comments</p>


    {% endfor %}

{% endblock content %}